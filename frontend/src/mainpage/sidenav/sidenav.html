<div class="sidenav" [class.collapsed]="menuCollapsed">
  <!-- Header del sidenav -->
  <div class="sidenav-header">
    <div class="user-info" *ngIf="usuario">
      <i class="bi bi-person-circle user-icon"></i>
      <div class="user-details" *ngIf="!menuCollapsed">
        <strong>{{ usuario.nombreCompleto }}</strong>
        <small class="text-muted">{{ usuario.email }}</small>
        <span class="badge bg-primary mt-1" *ngIf="isAdmin">Administrador</span>
        <span class="badge bg-secondary mt-1" *ngIf="!isAdmin">Usuario</span>
      </div>
    </div>
    <button class="btn btn-sm btn-toggle" (click)="toggleMenu()">
      <i class="bi" [class.bi-chevron-left]="!menuCollapsed" [class.bi-chevron-right]="menuCollapsed"></i>
    </button>
  </div>

  <hr>

  <!-- Menú de navegación -->
  <nav class="sidenav-nav">
    <!-- Sección: Usuario (todos ven esto) -->
    <div class="nav-section">
      <div class="nav-section-title" *ngIf="!menuCollapsed">
        <i class="bi bi-person"></i> Usuario
      </div>
      
      <a routerLink="/mainpage/perfil" routerLinkActive="active" class="nav-item">
        <i class="bi bi-person-badge"></i>
        <span *ngIf="!menuCollapsed">Mi Perfil</span>
      </a>
    </div>

    <!-- Sección: Equipos Fantasy -->
    <div class="nav-section">
      <hr *ngIf="!menuCollapsed">
      <div class="nav-section-title" *ngIf="!menuCollapsed">
        <i class="bi bi-trophy"></i> Equipos Fantasy
      </div>

      <a routerLink="/mainpage/equipos-fantasy" routerLinkActive="active" class="nav-item">
        <i class="bi bi-list-ul"></i>
        <span *ngIf="!menuCollapsed">Mis Equipos</span>
      </a>

      <a routerLink="/mainpage/equipos-fantasy/crear" routerLinkActive="active" class="nav-item">
        <i class="bi bi-plus-circle"></i>
        <span *ngIf="!menuCollapsed">Crear Equipo</span>
      </a>
    </div>

    <!-- Sección: Ligas -->
    <div class="nav-section">
      <hr *ngIf="!menuCollapsed">
      <div class="nav-section-title" *ngIf="!menuCollapsed">
        <i class="bi bi-flag-fill"></i> Ligas
      </div>

      <a routerLink="/mainpage/ligas" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-item">
        <i class="bi bi-collection"></i>
        <span *ngIf="!menuCollapsed">Mis Ligas</span>
      </a>

      <a routerLink="/mainpage/ligas/crear" routerLinkActive="active" class="nav-item">
        <i class="bi bi-plus-square"></i>
        <span *ngIf="!menuCollapsed">Crear Liga</span>
      </a>

      <a routerLink="/mainpage/ligas/buscar" routerLinkActive="active" class="nav-item">
        <i class="bi bi-search"></i>
        <span *ngIf="!menuCollapsed">Buscar y Unirse</span>
      </a>
    </div>

    <!-- Sección: Administración (solo admins) -->
    <div class="nav-section" *ngIf="isAdmin">
      <hr>
      <div class="nav-section-title" *ngIf="!menuCollapsed">
        <i class="bi bi-shield-lock"></i> Administración
      </div>

      <a routerLink="/mainpage/admin/equipos-nfl" routerLinkActive="active" class="nav-item">
        <i class="bi bi-grid-3x3-gap"></i>
        <span *ngIf="!menuCollapsed">Equipos NFL</span>
      </a>

      <a routerLink="/mainpage/admin/equipos-nfl/crear" routerLinkActive="active" class="nav-item">
        <i class="bi bi-plus-square-fill"></i>
        <span *ngIf="!menuCollapsed">Crear Equipo NFL</span>
      </a>

      <a routerLink="/mainpage/temporada" routerLinkActive="active" class="nav-item">
        <i class="bi bi-calendar3"></i>
        <span *ngIf="!menuCollapsed">Temporadas</span>
      </a>

      <a routerLink="/mainpage/jugadores" routerLinkActive="active" class="nav-item">
        <i class="bi bi-person-badge"></i>
        <span *ngIf="!menuCollapsed">Jugadores</span>
      </a>

      <a routerLink="/mainpage/jugadores/batch-upload" routerLinkActive="active" class="nav-item">
         <i class="bi bi-people"></i>
        <span *ngIf="!menuCollapsed">Batch Jugadores</span>
      </a>
    </div>
  </nav>

  <!-- Footer del sidenav -->
  <div class="sidenav-footer">
    <button class="btn btn-danger w-100" (click)="logout()">
      <i class="bi bi-box-arrow-right"></i>
      <span *ngIf="!menuCollapsed">Cerrar Sesión</span>
    </button>
  </div>
</div>