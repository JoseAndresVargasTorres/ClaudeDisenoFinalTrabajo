<div class="container mt-5">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <span class="navbar-brand me-auto">
        <i class="bi bi-trophy-fill"></i> Mis Ligas
      </span>
      <div class="btn-group" role="group">
        <a routerLink="/mainpage/ligas/crear" class="btn btn-success">
          <i class="bi bi-plus-circle"></i> Crear Liga
        </a>
        <a routerLink="/mainpage/ligas/buscar" class="btn btn-info">
          <i class="bi bi-search"></i> Buscar Liga
        </a>
        <button type="button" class="btn btn-dark" (click)="cargarLigas()">
          <i class="bi bi-arrow-clockwise"></i> Actualizar
        </button>
      </div>
    </div>
  </nav>

  <!-- Mensaje de carga -->
  <div *ngIf="isLoading" class="alert alert-info mt-4">
    <div class="spinner-border spinner-border-sm me-2" role="status"></div>
    Cargando ligas...
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="errorMessage" class="alert alert-danger mt-4">
    <i class="bi bi-exclamation-triangle-fill"></i> {{ errorMessage }}
  </div>

  <!-- Lista de ligas -->
  <div class="row mt-4" *ngIf="!isLoading && !errorMessage">
    <!-- Mensaje si no hay ligas -->
    <div *ngIf="ligas.length === 0" class="col-12">
      <div class="alert alert-warning">
        <i class="bi bi-info-circle"></i> No estás participando en ninguna liga aún.
        <div class="mt-3">
          <a routerLink="/mainpage/ligas/crear" class="btn btn-success me-2">
            <i class="bi bi-plus-circle"></i> Crear Liga
          </a>
          <a routerLink="/mainpage/ligas/buscar" class="btn btn-info">
            <i class="bi bi-search"></i> Buscar y Unirse
          </a>
        </div>
      </div>
    </div>

    <!-- Tarjetas de ligas -->
    <div class="col-md-6 col-lg-4 mb-4" *ngFor="let liga of ligas">
      <div class="card liga-card h-100 shadow-sm">
        <!-- Badge de Comisionado -->
        <div class="comisionado-badge" *ngIf="liga.esComisionado">
          <i class="bi bi-star-fill"></i> COMISIONADO
        </div>

        <!-- Imagen de la liga -->
        <div class="card-img-top-wrapper">
          <img 
            [src]="obtenerImagenUrl(liga.imagenUrl)" 
            [alt]="liga.nombreLiga"
            class="card-img-top"
          >
        </div>

        <div class="card-body">
          <h5 class="card-title">{{ liga.nombreLiga }}</h5>
          <p class="card-text text-muted small" *ngIf="liga.descripcion">
            {{ liga.descripcion }}
          </p>

          <div class="liga-info mt-3">
            <div class="info-row">
              <span class="info-label">
                <i class="bi bi-calendar-event"></i> Temporada:
              </span>
              <span class="info-value">{{ liga.nombreTemporada || 'N/A' }}</span>
            </div>

            <div class="info-row">
              <span class="info-label">
                <i class="bi bi-people-fill"></i> Equipos:
              </span>
              <span class="info-value">
                {{ liga.cuposOcupados }}/{{ liga.cuposTotales }}
                <small class="text-muted">({{ getCuposDisponibles(liga) }} disponibles)</small>
              </span>
            </div>

            <div class="info-row">
              <span class="info-label">
                <i class="bi bi-flag-fill"></i> Estado:
              </span>
              <span class="badge" [ngClass]="getBadgeClass(liga.estado)">
                {{ liga.estado }}
              </span>
            </div>

            <div class="info-row" *ngIf="!liga.esComisionado">
              <span class="info-label">
                <i class="bi bi-person-badge"></i> Comisionado:
              </span>
              <span class="info-value">{{ liga.nombreComisionado || 'N/A' }}</span>
            </div>
          </div>
        </div>

        <div class="card-footer bg-transparent">
          <button class="btn btn-primary w-100">
            <i class="bi bi-box-arrow-in-right"></i> Ver Detalles
          </button>
        </div>
      </div>
    </div>
  </div>
</div>